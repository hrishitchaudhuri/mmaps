{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"C:/Users/hp/Documents/main/mmaps/mind-maps/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React from'react';import axios from'axios';import Draggable from'react-draggable';import Button from'./Button';function getIntPx(s){var pInd=s.indexOf('p');return parseInt(s.slice(0,pInd));}var MMNote=/*#__PURE__*/function(_React$Component){_inherits(MMNote,_React$Component);var _super=_createSuper(MMNote);function MMNote(props){var _this;_classCallCheck(this,MMNote);_this=_super.call(this,props);_this.handleDrag=function(e,ui){var _this$state$deltaPosi=_this.state.deltaPosition,x=_this$state$deltaPosi.x,y=_this$state$deltaPosi.y;_this.setState({deltaPosition:{x:x+ui.deltaX,y:y+ui.deltaY}});};_this.handleSave=function(e){e.preventDefault();var NOTE_ID=this.props.id;var ITEMS=this.state.messages;var TITLE=this.state.title;var NOTE={NOTE_ID:NOTE_ID,ITEMS:ITEMS,TITLE:TITLE};console.log(NOTE);axios.post('http://localhost:8000/mapi',NOTE).then(function(res){return console.log('[INFO] Notes posted to DB successfully.'+res.text());}).catch(function(err){console.log(\"[ERR] \"+err);});};_this.handleClear=function(e){e.preventDefault();var NOTE_ID=this.props.id;var NOTE_del={NOTE_ID:NOTE_ID};this.title_ref.value='';this.setState(function(prevState){return{items:[],messages:[],title:'',style:_objectSpread(_objectSpread({},prevState.style),{},{height:\"150px\"}),leeway:1};});axios.post('http://localhost:8000/mapi/delete',NOTE_del).then(function(res){return console.log('[INFO] Note cleared successfully.'+res.text());}).catch(function(err){console.log('[ERR] '+err);});};_this.handleSubmit=function(e){e.preventDefault();var msg=this.inp_ref.value;var note_title=this.title_ref.value;this.setState(function(prevState){if(msg!==\"\"){return{items:[].concat(_toConsumableArray(prevState.items),[/*#__PURE__*/_jsx(\"li\",{children:\"\"+msg},prevState.items.length)]),messages:[].concat(_toConsumableArray(prevState.messages),[msg]),title:note_title};}else{return prevState;}});this.inp_ref.value=\"\";};_this.state={style:{position:\"absolute\",borderStyle:\"solid\",borderColor:\"black\",borderWidth:\"2px\",borderRadius:\"5px\",width:\"280px\",height:\"150px\",left:props.x+\"px\",top:props.y+\"px\",transform:\"translateY(0)\"},items:[],messages:[],title:'',diffX:0,diffY:0,dragging:false,leeway:1};_this.handleSubmit=_this.handleSubmit.bind(_assertThisInitialized(_this));_this.hideText=_this.hideText.bind(_assertThisInitialized(_this));_this.showText=_this.showText.bind(_assertThisInitialized(_this));_this.handleDrag=_this.handleDrag.bind(_assertThisInitialized(_this));_this.handleSave=_this.handleSave.bind(_assertThisInitialized(_this));_this.handleClear=_this.handleClear.bind(_assertThisInitialized(_this));var noteid={'NOTE_ID':_this.props.id};var query=Object.keys(noteid).map(function(key){return key+'='+noteid[key];}).join('&');var req_url='http://localhost:8000/mapi/?'+query;fetch(req_url).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(res){var data,count;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return res.json();case 2:data=_context.sent;console.log(data);count=0;if(data&&data.TITLE&&data.ITEMS){_this.setState({items:data.ITEMS.map(function(element){return/*#__PURE__*/_jsx(\"li\",{children:\"\"+element},count++);}),messages:data.ITEMS,title:data.TITLE});console.log(\"[INFO] Set State Successful.\");}case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).then(console.log(\"[INFO] Successfully Loaded Data.\"));return _this;}_createClass(MMNote,[{key:\"hideText\",value:function hideText(){this.secref.style.visibility=\"hidden\";}},{key:\"showText\",value:function showText(){this.secref.style.visibility=\"visible\";}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.state.items.length>=this.state.leeway){this.setState(function(prevState){return{style:_objectSpread(_objectSpread({},prevState.style),{},{height:getIntPx(prevState.style.height)+20+\"px\"}),leeway:prevState.leeway+1};});}}},{key:\"render\",value:function render(){var _this2=this;return/*#__PURE__*/_jsx(Draggable,{handle:\".handle\",bounds:\"parent\",children:/*#__PURE__*/_jsxs(\"div\",{style:this.state.style,ref:function ref(r){_this2.div_ref=r;},children:[/*#__PURE__*/_jsx(\"div\",{id:this.props.id,className:\"handle\",style:{width:\"100%\",height:\"20px\",backgroundColor:\"rgb(280, 280, 60)\",position:\"absolute\",textAlign:\"center\"},onMouseEnter:this.hideText,onMouseLeave:this.showText,children:/*#__PURE__*/_jsx(\"section\",{ref:function ref(a){_this2.secref=a;},children:\"Click here to drag\"})}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{style:{position:\"absolute\",top:\"22px\"},onSubmit:this.handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",defaultValue:this.state.title,style:{width:\"100%\"},ref:function ref(r){_this2.title_ref=r;}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",ref:function ref(r){_this2.inp_ref=r;}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Add point\"})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"ul\",{style:{position:\"relative\",width:\"100%\",top:\"35px\"},children:[this.state.items,\" \",/*#__PURE__*/_jsx(\"br\",{})]}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(Button,{style:{position:\"relative\",width:\"100%\",top:\"100%\"},color:\"green\",finalcolor:\"rgb(0, 165, 0)\",text:\"Save\",handleClick:this.handleSave}),/*#__PURE__*/_jsx(Button,{style:{position:\"relative\",width:\"100%\",top:\"100%\"},color:\"green\",finalcolor:\"rgb(0, 165, 0)\",text:\"Clear\",handleClick:this.handleClear})]})});}}]);return MMNote;}(React.Component);export default MMNote;","map":{"version":3,"sources":["C:/Users/hp/Documents/main/mmaps/mind-maps/src/Components/MMNote.js"],"names":["React","axios","Draggable","Button","getIntPx","s","pInd","indexOf","parseInt","slice","MMNote","props","handleDrag","e","ui","state","deltaPosition","x","y","setState","deltaX","deltaY","handleSave","preventDefault","NOTE_ID","id","ITEMS","messages","TITLE","title","NOTE","console","log","post","then","res","text","catch","err","handleClear","NOTE_del","title_ref","value","prevState","items","style","height","leeway","handleSubmit","msg","inp_ref","note_title","length","position","borderStyle","borderColor","borderWidth","borderRadius","width","left","top","transform","diffX","diffY","dragging","bind","hideText","showText","noteid","query","Object","keys","map","key","join","req_url","fetch","json","data","count","element","secref","visibility","r","div_ref","backgroundColor","textAlign","a","Component"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport axios from 'axios';\r\nimport Draggable from 'react-draggable';\r\nimport Button from './Button';\r\n\r\nfunction getIntPx(s){\r\n    let pInd = s.indexOf('p');\r\n    return parseInt(s.slice(0, pInd));\r\n}\r\n\r\nclass MMNote extends React.Component{\r\n    constructor(props){\r\n        super(props);\r\n        this.state = {\r\n            \r\n            style: {\r\n                position: \"absolute\",\r\n                borderStyle: \"solid\",\r\n                borderColor: \"black\",\r\n                borderWidth: \"2px\",\r\n                borderRadius: \"5px\",\r\n                width: \"280px\",\r\n                height: \"150px\",\r\n                left: props.x + \"px\",\r\n                top: props.y + \"px\",\r\n                transform: \"translateY(0)\",\r\n            },\r\n            items: [],\r\n            messages: [],\r\n            title: '',\r\n            diffX: 0,\r\n            diffY: 0,\r\n            dragging: false,\r\n            leeway: 1\r\n        };\r\n        \r\n        this.handleSubmit = this.handleSubmit.bind(this);\r\n        this.hideText = this.hideText.bind(this);\r\n        this.showText = this.showText.bind(this);\r\n        this.handleDrag = this.handleDrag.bind(this);\r\n        this.handleSave = this.handleSave.bind(this);\r\n        this.handleClear = this.handleClear.bind(this);\r\n\r\n        var noteid = {\r\n            'NOTE_ID':this.props.id\r\n        };\r\n\r\n        var query = Object.keys(noteid).map(key => key + '=' + noteid[key]).join('&');\r\n        var req_url = 'http://localhost:8000/mapi/?' + query;\r\n\r\n        fetch(req_url)\r\n            .then(async res=> {\r\n                const data = await res.json();\r\n\r\n                console.log(data);\r\n                \r\n                var count = 0;\r\n                if (data && data.TITLE && data.ITEMS) {\r\n                    this.setState({\r\n                        items: data.ITEMS.map(element => <li key={count++}>{\"\" + element}</li>),\r\n                        messages: data.ITEMS,\r\n                        title: data.TITLE\r\n                    })\r\n                    console.log(\"[INFO] Set State Successful.\");\r\n                }\r\n            })\r\n            .then(console.log(\"[INFO] Successfully Loaded Data.\"));\r\n    }\r\n\r\n    handleDrag = (e, ui) => {\r\n        const {x, y} = this.state.deltaPosition;\r\n        this.setState({\r\n          deltaPosition: {\r\n            x: x + ui.deltaX,\r\n            y: y + ui.deltaY,\r\n          }\r\n        });\r\n    };\r\n\r\n    handleSave = function(e) {\r\n        e.preventDefault();\r\n        const NOTE_ID = this.props.id;\r\n        const ITEMS = this.state.messages;\r\n        const TITLE = this.state.title;\r\n\r\n        const NOTE = {\r\n            NOTE_ID, \r\n            ITEMS, \r\n            TITLE\r\n        };\r\n\r\n        console.log(NOTE);\r\n        axios\r\n            .post('http://localhost:8000/mapi', NOTE)\r\n            .then((res)=>console.log('[INFO] Notes posted to DB successfully.' + res.text()))\r\n            .catch(err => {\r\n                console.log(\"[ERR] \" + err);\r\n            });\r\n    }\r\n    \r\n    handleClear = function(e) {\r\n        e.preventDefault();\r\n        const NOTE_ID = this.props.id;\r\n\r\n        const NOTE_del = {\r\n            NOTE_ID\r\n        };\r\n\r\n        this.title_ref.value = '';\r\n\r\n        this.setState(prevState => {\r\n            return {\r\n                items: [],\r\n                messages: [],\r\n                title: '',\r\n                style: {\r\n                    ...prevState.style,\r\n                    height: \"150px\"\r\n                }, \r\n                leeway: 1\r\n            }\r\n        });\r\n\r\n        axios\r\n            .post('http://localhost:8000/mapi/delete', NOTE_del)\r\n            .then((res)=>console.log('[INFO] Note cleared successfully.' + res.text()))\r\n            .catch(err => {\r\n                console.log('[ERR] ' + err);\r\n            });\r\n    }\r\n\r\n    handleSubmit = function(e){\r\n        e.preventDefault();\r\n        const msg = this.inp_ref.value;\r\n        const note_title = this.title_ref.value;\r\n\r\n        this.setState(prevState => {\r\n            if(msg !== \"\")\r\n            {\r\n                return {\r\n                    items: [...prevState.items, <li key={prevState.items.length}>{\"\" + msg}</li>],\r\n                    messages: [...prevState.messages, msg],\r\n                    title: note_title\r\n                }\r\n            }\r\n            else{\r\n                return prevState;\r\n            }\r\n        });\r\n        this.inp_ref.value = \"\";\r\n    }\r\n\r\n    hideText(){\r\n        this.secref.style.visibility = \"hidden\";\r\n    }\r\n\r\n    showText(){\r\n        this.secref.style.visibility = \"visible\";\r\n    }\r\n\r\n    componentDidUpdate(){\r\n        if(this.state.items.length >= this.state.leeway){\r\n            this.setState(prevState=>{\r\n                return {\r\n                    style:{\r\n                        ...prevState.style,\r\n                        height: (getIntPx(prevState.style.height) + 20) + \"px\"\r\n                    },\r\n                    leeway: prevState.leeway + 1\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    render(){\r\n        return (<Draggable handle=\".handle\" bounds=\"parent\">\r\n        <div style={this.state.style} ref={r => {this.div_ref = r;}} >\r\n            <div id={this.props.id} className=\"handle\"\r\n                style={{width: \"100%\", height:\"20px\", backgroundColor:\"rgb(280, 280, 60)\", position:\"absolute\", textAlign:\"center\"}} \r\n                onMouseEnter={this.hideText}\r\n                onMouseLeave={this.showText}\r\n            >\r\n                <section ref={a=>{this.secref = a;}} >Click here to drag</section>\r\n            </div>\r\n            <br />\r\n            <form style={{position:\"absolute\", top:\"22px\"}} onSubmit={this.handleSubmit}>\r\n                <input type=\"text\" placeholder=\"Title\" defaultValue={this.state.title} style={{width:\"100%\"}} ref={r => {this.title_ref = r;}}></input>\r\n                <input type=\"text\" ref={r => {this.inp_ref = r;}}></input>\r\n                <button type=\"submit\" className=\"submit-button\">Add point</button>\r\n            </form>\r\n            <br/>\r\n            <ul style={{position:\"relative\",width:\"100%\", top:\"35px\"}}>\r\n                {this.state.items} <br/>\r\n            </ul>\r\n            <br/><br/>\r\n            <Button style={{position:\"relative\", width:\"100%\", top:\"100%\"}} color=\"green\" finalcolor=\"rgb(0, 165, 0)\" text=\"Save\" handleClick={this.handleSave} />\r\n            <Button style={{position:\"relative\", width:\"100%\", top:\"100%\"}} color=\"green\" finalcolor=\"rgb(0, 165, 0)\" text=\"Clear\" handleClick={this.handleClear} />\r\n        </div>\r\n        </Draggable>);\r\n    }\r\n}\r\n\r\nexport default MMNote;"]},"metadata":{},"sourceType":"module"}